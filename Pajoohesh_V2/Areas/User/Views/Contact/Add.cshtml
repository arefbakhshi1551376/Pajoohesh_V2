@using Microsoft.AspNetCore.Identity
@using Pajoohesh_V2.Model.Models.Main.User
@model Pajoohesh_V2.Model.ViewModels.Branch.ForSite.ForRepository.ContactUs.ContactUsAddVm
@inject UserManager<User> _userManager;
@{
    Layout = "_Layout";
    User currentUser = null;
    if (User.Identity.IsAuthenticated)
    {
        currentUser = await _userManager.FindByNameAsync(User.Identity.Name);
    }
}

<div class="content">
    <h2 class="content-header">تماس با ما</h2>
    <form action="#" method="POST" class="profile-form" enctype="multipart/form-data">
        
        @if (currentUser != null)
        {
            <input type="hidden" asp-for="SenderId" value="@currentUser.Id">
        }
        else
        {
            <input type="hidden" asp-for="SenderId">
        }

        @if (currentUser != null)
        {
            <div class="form-group">
                <label for="" class="form-label">نام:</label>
                <input type="text" class="form-input" asp-for="SenderName" value="@currentUser.Name">
            </div>
        }
        else
        {
            <div class="form-group">
                <label for="" class="form-label">نام:</label>
                <input type="text" class="form-input" asp-for="SenderName">
            </div>
        }

        @if (currentUser != null)
        {
            <div class="form-group">
                <label for="" class="form-label">نام خانوادگی:</label>
                <input type="text" class="form-input" asp-for="SenderFamily" value="@currentUser.Family">
            </div>
        }
        else
        {
            <div class="form-group">
                <label for="" class="form-label">نام خانوادگی:</label>
                <input type="text" class="form-input" asp-for="SenderFamily">
            </div>
        }

        @if (currentUser != null)
        {
            <div class="form-group">
                <label for="" class="form-label">ایمیل:</label>
                <input type="email" class="form-input" asp-for="SenderEmail" value="@currentUser.Email">
            </div>
        }
        else
        {
            <div class="form-group">
                <label for="" class="form-label">ایمیل:</label>
                <input type="email" class="form-input" asp-for="SenderEmail">
            </div>
        }
        
        <div class="form-group">
            <label for="" class="form-label">موضوع:</label>
            <input type="text" class="form-input" asp-for="Subject">
        </div>
        <div class="form-group full-width">
            <label for="" class="form-label">متن پیام:</label>
            <textarea class="form-input" asp-for="Text"></textarea>
        </div>
        <button type="submit" class="btn btn-load-more">ارسال پیام</button>
    </form>
</div>